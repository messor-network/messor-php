(function(){"use strict";var e={929:function(e,t,a){var n=a(9963),i=a(655),u=a(6252),s=a(3577),l=a(2262),r=a(7061),o=a(8234),c=a(8682),d=a(4312),p=a(4995),m={class:"ms-form-control__field ms-form-control__field-bg"},_=["name","value"],f=(0,u._)("span",{class:"ms-checkbox__icon"},null,-1),b={class:"ms-checkbox__txt"},g=(0,u.aZ)({__name:"RadioButtonControl",props:{name:{type:String,required:!0},value:{type:String,required:!0},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup:function(e,t){var a=t.emit,i=e,s="".concat(i.name).concat(performance.now()),r=(0,u.Fl)({get:function(){return i.modelValue},set:function(e){return a("update:modelValue",e)}});return function(t,a){return(0,u.wg)(),(0,u.iD)("div",m,[(0,u._)("label",{class:"ms-checkbox ms-checkbox-rounded",for:s},[(0,u.wy)((0,u._)("input",{id:s,name:e.name,type:"radio","onUpdate:modelValue":a[0]||(a[0]=function(e){return(0,l.dq)(r)?r.value=e:null}),value:e.value},null,8,_),[[n.G2,(0,l.SU)(r)]]),f,(0,u._)("span",b,[(0,u.WI)(t.$slots,"default")])])])}}});const h=g;var v=h,k={class:"ms-form-control__field"},w={for:"request-data--path"},U={key:0,class:"ms-form-control__label"},S=(0,u.aZ)({__name:"TextInputComponent",props:{title:{type:String},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup:function(e,t){var a=t.emit,i=e,r=(0,u.Fl)({get:function(){return i.modelValue},set:function(e){return a("update:modelValue",e)}});return function(t,a){return(0,u.wg)(),(0,u.iD)("div",k,[(0,u._)("label",w,[e.title?((0,u.wg)(),(0,u.iD)("span",U,(0,s.zw)(e.title),1)):(0,u.kq)("",!0),(0,u.wy)((0,u._)("input",{id:"request-data--path","onUpdate:modelValue":a[0]||(a[0]=function(e){return(0,l.dq)(r)?r.value=e:null}),class:"ms-form-control ms-form-control-md",type:"text"},null,512),[[n.nr,(0,l.SU)(r)]])])])}}});const y=S;var D=y,x=a(6866),q=a(2180),V=a(2718),z=a(6086),I=a(8127);function F(e,t,a){return(0,i.mG)(this,void 0,Promise,(function(){var n,u,s,l,r,o,c,d;return(0,i.Jh)(this,(function(p){switch(p.label){case 0:return n={method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"},[4,fetch("".concat((0,I.VN)(),"&route=").concat(e),n)];case 1:return u=p.sent(),s=u.headers.get("content-length")||"0",l=parseInt(s,10),r=0,o="",c=new Response(new ReadableStream({start:function(e){var t;return(0,i.mG)(this,void 0,void 0,(function(){var n,s,c,d,p;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(n=null===(t=u.body)||void 0===t?void 0:t.getReader(),!n)return[2];if(s=u.headers.get("Content-Disposition"),!s)return[2];o=s.substring(s.indexOf("filename=")+9),i.label=1;case 1:return[4,n.read()];case 2:if(c=i.sent(),d=c.done,p=c.value,d||!p)return[3,4];r+=p.byteLength,a({loaded:r,total:l}),e.enqueue(p),i.label=3;case 3:return[3,1];case 4:return e.close(),[2]}}))}))}})),d={},[4,c.blob()];case 2:return[2,(d.data=p.sent(),d.fileName=o,d)]}}))}))}var O=function(e,t){var a=document.createElement("a");document.body.appendChild(a),a.style.display="none";var n=window.URL.createObjectURL(e);a.href=n,a.download=t,a.click(),window.URL.revokeObjectURL(n)},j="extension/module/messor/FDBBApi",C=(0,z.Q_)("file-database-backup",{state:function(){return{loading:!1,initialData:{filename:"",avaliable_arch:{},tables:[],type_backup:[],exclude:[],email:"",path:"",action:""},requestData:{path:"",action:"download",type_arch:".zip",type_backup:"backup_db",filename:"",tables:[],email_user:""},excludedFiles:"",totalFileSize:0,downloadedSize:0}},getters:{route:function(){return j}},actions:{fetchInitialState:function(e){return void 0===e&&(e=!0),(0,i.mG)(this,void 0,Promise,(function(){var t,a,n,u,s,l,r;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return this.loading=e,[4,(0,I.Nv)(j,"main")];case 1:return t=o.sent(),a=t.data,n=t.status,"ok"!==n.toLocaleLowerCase()?(this.loading=!1,[2]):(this.initialData=(0,i.pi)({},a||this.initialData),u=a.filename,s=a.exclude,l=a.email,r=a.path,this.requestData=(0,i.pi)((0,i.pi)({},this.requestData),{path:r,filename:u,email_user:l}),this.excludedFiles=(null===s||void 0===s?void 0:s.join("\n"))||"",this.loading=!1,[2])}}))}))},excludeFiles:function(){return(0,i.mG)(this,void 0,Promise,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return this.loading=!0,[4,(0,I.Nv)(j,"exclude",{exclude:this.excludedFiles.split("\n")})];case 1:return e.sent(),this.loading=!1,[2]}}))}))},storeBackup:function(){return(0,i.mG)(this,void 0,Promise,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return this.loading=!0,[4,(0,I.Nv)(j,"save",this.requestData)];case 1:return e.sent(),this.loading=!1,[2]}}))}))},sendBackup:function(){return(0,i.mG)(this,void 0,Promise,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return this.loading=!0,[4,(0,I.Nv)(j,"email",this.requestData)];case 1:return e.sent(),this.loading=!1,[2]}}))}))},downloadBackup:function(){return(0,i.mG)(this,void 0,Promise,(function(){var e,t,a,n=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return this.loading=!0,[4,F(j,this.requestData,(function(e){var t=e.loaded,a=e.total;n.downloadedSize=t,n.totalFileSize=a}))];case 1:return e=i.sent(),t=e.data,a=e.fileName,t&&O(t,a),this.loading=!1,[2]}}))}))}}}),W=a(7154),B=function(e){return(0,u.dD)("data-v-6a60b832"),e=e(),(0,u.Cn)(),e},G={key:0},J={class:"ms-settings-page__group"},P={class:"ms-settings-page__group-title"},Z={class:"ms-settings-page__group-col"},L={class:"ms-settings-page__group-col"},N={for:"request-data--type_arch"},R={class:"ms-form-control__label"},E={class:"select_wrapper"},T=["value"],A={key:0,class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},H={key:0,class:"ms-settings-page__group"},Y={class:"ms-settings-page__group-title"},K={class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},M={class:"ms-page-box__item"},Q={class:"ms-page-box__title"},X={class:"ms-page-box__title-icon"},$=["src"],ee={class:"ms-page-box__title-txt"},te={class:"ms-page-box__content ms-page-box__content-padding"},ae={class:"ms-form"},ne={class:"head-col"},ie=["for"],ue=["id","value"],se=B((function(){return(0,u._)("span",{class:"ms-checkbox__icon"},null,-1)})),le={class:"ms-checkbox__txt"},re={class:"ms-page-box__controls ms-page-box__controls-centered"},oe=B((function(){return(0,u._)("span",{class:"ms-link-primary"},"/",-1)})),ce={class:"ms-settings-page__group"},de={class:"ms-settings-page__group-title"},pe={class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},me={class:(0,s.C_)(["ms-settings-page__group-col","ms-settings-page__group-col-has-hidden","ms-settings-page__group-col-fluid"])},_e={class:"ms-settings-page__group-col-hidden"},fe={class:"ms-settings-page__group-col ms-settings-page__group-col-fluid"},be=(0,u.aZ)({__name:"FileDatabaseBackup",setup:function(e){var t=this,m=(0,V.s)(),_=C(),f=function(){return(0,i.mG)(t,void 0,Promise,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,_.fetchInitialState()];case 1:return e.sent(),[4,m.checkLicense(_.route)];case 2:return e.sent(),[2]}}))}))},b=function(){_.requestData.tables=_.initialData.tables},g=function(){_.requestData.tables=[]},h=function(){return(0,i.mG)(t,void 0,Promise,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,_.excludeFiles()];case 1:switch(t.sent(),e=_.requestData.action,e){case"download":return[3,2];case"save":return[3,4];case"email":return[3,6]}return[3,8];case 2:return[4,_.downloadBackup()];case 3:return t.sent(),[3,9];case 4:return[4,_.storeBackup()];case 5:return t.sent(),[3,9];case 6:return[4,_.sendBackup()];case 7:return t.sent(),[3,9];case 8:return[3,9];case 9:return[2]}}))}))};return(0,u.bv)((function(){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return(0,r.g)(),[4,f()];case 1:return e.sent(),[2]}}))}))})),function(e,t){return(0,u.wg)(),(0,u.iD)(u.HY,null,[(0,l.SU)(m).licenseAccepted?(0,u.kq)("",!0):((0,u.wg)(),(0,u.j4)(o.Z,{key:0,"api-route":(0,l.SU)(_).route},null,8,["api-route"])),(0,l.SU)(_).loading?((0,u.wg)(),(0,u.j4)(d.Z,{key:1},{default:(0,u.w5)((function(){return[(0,l.SU)(_).downloadedSize&&(0,l.SU)(_).totalFileSize?((0,u.wg)(),(0,u.iD)("span",G,(0,s.zw)((100*(0,l.SU)(_).downloadedSize/((0,l.SU)(_).totalFileSize||1)).toFixed(1))+"% ",1)):(0,u.kq)("",!0)]})),_:1})):(0,u.kq)("",!0),(0,u.Wm)(W.Z,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(p.Z,{"image-url":a(1974),"sub-title":(0,l.SU)(r.I)("backup_descript"),title:"Backup"},{"default-settings":(0,u.w5)((function(){return[(0,u.Wm)(D,{modelValue:(0,l.SU)(_).requestData.path,"onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,l.SU)(_).requestData.path=e}),title:(0,l.SU)(r.I)("backup_path")},null,8,["modelValue","title"]),(0,u.Wm)(v,{modelValue:(0,l.SU)(_).requestData.type_backup,"onUpdate:modelValue":t[1]||(t[1]=function(e){return(0,l.SU)(_).requestData.type_backup=e}),name:"type_backup",value:"backup_file"},{default:(0,u.w5)((function(){return[(0,u.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_file")),1)]})),_:1},8,["modelValue"]),(0,u.Wm)(v,{modelValue:(0,l.SU)(_).requestData.type_backup,"onUpdate:modelValue":t[2]||(t[2]=function(e){return(0,l.SU)(_).requestData.type_backup=e}),name:"type_backup",value:"backup_db"},{default:(0,u.w5)((function(){return[(0,u.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_database")),1)]})),_:1},8,["modelValue"]),(0,u._)("button",{class:"ms-btn-start ms-btn ms-btn-primary",type:"submit",onClick:h},(0,s.zw)((0,l.SU)(r.I)("backup_button_database")),1)]})),"professional-settings":(0,u.w5)((function(){return[(0,u._)("div",J,[(0,u._)("span",P,(0,s.zw)((0,l.SU)(r.I)("backup_archiving_setting")),1),(0,u._)("div",Z,[(0,u.Wm)(D,{modelValue:(0,l.SU)(_).requestData.filename,"onUpdate:modelValue":t[3]||(t[3]=function(e){return(0,l.SU)(_).requestData.filename=e}),title:(0,l.SU)(r.I)("backup_file_name")},null,8,["modelValue","title"])]),(0,u._)("div",L,[(0,u._)("label",N,[(0,u._)("span",R,(0,s.zw)((0,l.SU)(r.I)("backup_pack")),1),(0,u._)("span",E,[(0,u.wy)((0,u._)("select",{id:"request-data--type_arch","onUpdate:modelValue":t[4]||(t[4]=function(e){return(0,l.SU)(_).requestData.type_arch=e}),class:"ms-form-control ms-form-control-md",name:"type_arch"},[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(Object.entries((0,l.SU)(_).initialData.avaliable_arch),(function(e){var t=e[0],a=e[1];return(0,u.wg)(),(0,u.iD)("option",{key:t,value:a},(0,s.zw)(t),9,T)})),128))],512),[[n.bM,(0,l.SU)(_).requestData.type_arch]])])])]),"backup_file"===(0,l.SU)(_).requestData.type_backup?((0,u.wg)(),(0,u.iD)("div",A,[(0,u.Wm)(x.Z,{modelValue:(0,l.SU)(_).excludedFiles,"onUpdate:modelValue":t[5]||(t[5]=function(e){return(0,l.SU)(_).excludedFiles=e}),name:"EXCLUDE_FILES",type:"textarea","field-id":"excludedFiles",title:"".concat((0,l.SU)(r.I)("backup_exclude_directory"),":"),"tooltip-text":(0,l.SU)(r.I)("backup_exclude_directory")},null,8,["modelValue","title","tooltip-text"])])):(0,u.kq)("",!0)]),"backup_db"===(0,l.SU)(_).requestData.type_backup?((0,u.wg)(),(0,u.iD)("div",H,[(0,u._)("span",Y,(0,s.zw)((0,l.SU)(r.I)("backup_settings")),1),(0,u._)("div",K,[(0,u._)("div",M,[(0,u._)("div",Q,[(0,u._)("span",X,[(0,u._)("img",{src:a(1713),alt:""},null,8,$)]),(0,u._)("span",ee,(0,s.zw)((0,l.SU)(r.I)("backup_select_table")),1),(0,u.Wm)(c.Z,{"tooltip-text":(0,l.SU)(r.I)("backup_i_select_table")},null,8,["tooltip-text"])]),(0,u._)("div",te,[(0,u._)("div",ae,[(0,u._)("table",null,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,l.SU)(_).initialData.tables,(function(e){return(0,u.wg)(),(0,u.iD)("tr",{key:e},[(0,u._)("td",ne,[(0,u._)("label",{for:"".concat(e,"-table-name-checkbox"),class:"ms-checkbox"},[(0,u.wy)((0,u._)("input",{id:"".concat(e,"-table-name-checkbox"),"onUpdate:modelValue":t[6]||(t[6]=function(e){return(0,l.SU)(_).requestData.tables=e}),value:e,name:"tables[]",type:"checkbox"},null,8,ue),[[n.e8,(0,l.SU)(_).requestData.tables]]),se],8,ie)]),(0,u._)("td",null,[(0,u._)("span",le,(0,s.zw)(e),1)])])})),128))])])]),(0,u._)("div",re,[(0,u._)("button",{id:"allenable",class:"ms-link-primary",onClick:b},(0,s.zw)((0,l.SU)(r.I)("backup_select_all")),1),oe,(0,u._)("button",{id:"alldisable",class:"ms-link-primary",onClick:g},(0,s.zw)((0,l.SU)(r.I)("backup_remove_select")),1)])])])])):(0,u.kq)("",!0),(0,u._)("div",ce,[(0,u._)("span",de,(0,s.zw)((0,l.SU)(r.I)("backup_action")),1),(0,u._)("div",pe,[(0,u.Wm)(v,{modelValue:(0,l.SU)(_).requestData.action,"onUpdate:modelValue":t[7]||(t[7]=function(e){return(0,l.SU)(_).requestData.action=e}),name:"action",value:"download"},{default:(0,u.w5)((function(){return[(0,u.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_download")),1)]})),_:1},8,["modelValue"])]),(0,u._)("div",me,[(0,u.Wm)(v,{modelValue:(0,l.SU)(_).requestData.action,"onUpdate:modelValue":t[8]||(t[8]=function(e){return(0,l.SU)(_).requestData.action=e}),name:"action",value:"email"},{default:(0,u.w5)((function(){return[(0,u.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_send_of_email")),1)]})),_:1},8,["modelValue"]),(0,u._)("div",_e,[(0,u.Wm)(D,{modelValue:(0,l.SU)(_).requestData.email_user,"onUpdate:modelValue":t[9]||(t[9]=function(e){return(0,l.SU)(_).requestData.email_user=e}),title:"Email"},null,8,["modelValue"])])]),(0,u._)("div",fe,[(0,u.Wm)(v,{modelValue:(0,l.SU)(_).requestData.action,"onUpdate:modelValue":t[10]||(t[10]=function(e){return(0,l.SU)(_).requestData.action=e}),name:"action",value:"save"},{default:(0,u.w5)((function(){return[(0,u.Uk)((0,s.zw)((0,l.SU)(r.I)("backup_save_on_server")),1)]})),_:1},8,["modelValue"])])])]})),_:1},8,["image-url","sub-title"])]})),_:1}),(0,l.SU)(m).hasError?((0,u.wg)(),(0,u.j4)(q.Z,{key:2})):(0,u.kq)("",!0)],64)}}}),ge=a(3744);const he=(0,ge.Z)(be,[["__scopeId","data-v-6a60b832"]]);var ve=he;(0,n.ri)(ve).use((0,z.WB)()).mount("#app")},1713:function(e,t,a){e.exports=a.p+"image/messor/icon-table.ecb5460e.svg"},1974:function(e,t,a){e.exports=a.p+"image/messor/backup.08c9b99a.png"}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var u=t[n]={exports:{}};return e[n](u,u.exports,a),u.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,u){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],u=e[c][2];for(var l=!0,r=0;r<n.length;r++)(!1&u||s>=u)&&Object.keys(a.O).every((function(e){return a.O[e](n[r])}))?n.splice(r--,1):(l=!1,u<s&&(s=u));if(l){e.splice(c--,1);var o=i();void 0!==o&&(t=o)}}return t}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[n,i,u]}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.j=757}(),function(){a.p="media/"}(),function(){var e={757:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,u,s=n[0],l=n[1],r=n[2],o=0;if(s.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(r)var c=r(a)}for(t&&t(n);o<s.length;o++)u=s[o],a.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return a.O(c)},n=self["webpackChunkfull_with_router_v0_2"]=self["webpackChunkfull_with_router_v0_2"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998,64],(function(){return a(929)}));n=a.O(n)})();